services:
  snmp-receiver:
    build: .
    ports:
      - "162:162/udp"
    environment:
      # SNMP設定
      SNMP_VERSION: "both"
      COMMUNITY_STRING: "public"
      USM_USER: "myuser"
      USM_AUTH_KEY: "authkey123"
      USM_PRIV_KEY: "privkey123"
      
      # 出力設定
      OUTPUT_MODE: "stdout"
      # WEBHOOK_URL: "http://example.com/webhook"
      
      # MIB設定
      MIB_DIR: "/opt/mibs"
      
      # ログレベル
      LOG_LEVEL: "INFO"
    volumes:
      - ./mibs/src:/mibs/src
      # 開発時はソースコードをマウントすると便利だが、今回はビルド済みコンテナとして扱う
      # - ./src:/app/src
    restart: unless-stopped
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"
